loader: taskgraph.loader.transform:loader

transforms:
  - src.transforms.publish:transforms
  - taskgraph.transforms.task:transforms
  - eije_taskgraph.transforms.common:transforms

task-defaults:
  worker-type: "publishscript-3"
  run-on-tasks-for: []

kind-dependencies:
  - diff
  - check
  - ap-test

tasks:
  index:
    dependencies:
      diff-index: diff-index
    soft-dependencies:
      - make-expectations-patch-make-patch
    description: Push changed index.lock
    scopes:
      - ap:publish:repo:archipelago-index
    worker:
      implementation: publishscript
      diff-task: {task-reference: <diff-index>}
